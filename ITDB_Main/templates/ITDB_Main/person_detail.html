{% extends "base.html" %}
{% load custom_tags %}

{% block content %}

<h1>{{ person.name }}</h1>
{% if person.headshot %}
    <img src="{{ person.headshot.url }}" alt="Image of {{ person.name }}" height="250" width="250">
{% else %}
    <p>(No image available)</p>
{% endif %}

<h2>Biography:</h2>
{{person.short_bio}}

{% if person.play_set.all %}
    <h2>Writing credits:</h2>

    <ul>
        {% for play in person.play_set.all %}
            <li><em><a href="/main/play/{{play.id}}/">{{ play.title }}</a></em></li>
        {% endfor %}
    </ul>
{% endif %}

{% if person.cast_set.all %}
    <h2>Has Appeared in:</h2>

    <ul>
        {% for role in person.cast_set.all|sort_by:'character' %}
            <li><a href="/main/production/{{role.production.id}}/">Details</a> | <em><a href="/main/play/{{role.production.play.id}}/">{{ role.production.play.title }}</a></em> |
                <a href="/main/theater/{{role.production.theater.id}}/">{{ role.production.theater.name }} ({{ role.production.theater.city }})</a> |
                {{ role.character }} | {{ role.production.display_year }}
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% if person.musician_set.all %}
    <h2>Creative Staff on:</h2>

    <ul>
        {% for instrument in person.musician_set.all|sort_by:'instrument' %}
            <li><a href="/main/production/{{instrument.production.id}}/">Details</a> | <em><a href="/main/play/{{instrument.production.play.id}}/">{{ job.production.play.title }}</a></em> |
                <a href="/main/theater/{{instrument.production.theater.id}}/">{{ instrument.production.theater.name }} ({{ instrument.production.theater.city }})</a> |
                {{ instrument.instrument }} | {{ instrument.production.display_year }}
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% if person.crew_set.all %}
    <h2>Creative Staff on:</h2>

    <ul>
        {% for job in person.crew_set.all|sort_by:'job' %}
            <li><a href="/main/production/{{job.production.id}}/">Details</a> | <em><a href="/main/play/{{job.production.play.id}}/">{{ job.production.play.title }}</a></em> |
                <a href="/main/theater/{{job.production.theater.id}}/">{{ job.production.theater.name }} ({{ job.production.theater.city }})</a> |
                {{ job.job }} | {{ job.production.display_year }}
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% endblock %}